@model IEnumerable<TGF.WebApp.Models.PostVM>

<h5 class="mb-3">Lista postów</h5>
<p>
    <a asp-action="Create">Create New</a>
</p>

@foreach (var post in Model)
{
    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title post-title" data-toggle="collapse" data-target="#content-@post.Id">
               @post.Title
            </h5>
            <p class="card-text data">
                <small class="text-muted">@post.PublicationDate</small>
            </p>
            <p class="card-text collapse content text-justify" id="content-@post.Id">@post.Content</p>

            @*<p class="card-text collapse" id="content-hide-@item.Id">
                    @Html.DisplayFor(modelItem => item.Short)...
                    <a href="#" data-toggle="collapse" data-target="#content-show-@item.Id" onclick="toggle(@item.Id)"> Show more</a>
                </p>
                <p class="card-text collapse" id="content-show-@item.Id" hidden>
                    @Html.DisplayFor(modelItem => item.Content)
                    <a href="#" data-toggle="collapse" data-target="#content-hide-@item.Id" onclick="toggle(@item.Id)"> Hide</a>
                </p>*@
        </div>
        <div class="card-footer d-flex justify-content-between align-items-center">
            <p class="text-muted" style="margin: 0;">Autor: @post.Profile.Name</p>
            <div>
                <a class="card-link" asp-action="Edit" asp-route-id="@post.Id">Edytuj</a>
                <a class="card-link" asp-action="Delete" asp-route-id="@post.Id">Usuń</a>
            </div>
        </div>
    </div>
}

<style>
    .post-title:hover {
        cursor: pointer;
        color: #6c6767;
    }

    .foot {
        padding-top: 0;
    }

    .data {
        margin-bottom: 0;
    }

    .content {
        margin-top: 16px;
    }
</style>

<script>
    console.log(contentHide.hidden)

    function toggle(id) {
        var contentHide = document.getElementById('content-hide-' + id)
        var contentShow = document.getElementById('content-show-' + id)
        console.log(contentHide.hidden)
        console.log(contentShow.hidden)
        if (!contentHide.hidden) {
            contentHide.hidden = true;
            contentShow.hidden = false;
        } else {
            contentHide.hidden = false;
            contentShow.hidden = true;
        }
    }
</script>
